{"ast":null,"code":"import React from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Modal,Form}from\"antd\";import{showLoading,hideLoading,ReloadData}from\"../../redux/rootSlice\";import{message}from\"antd\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Experiences(){const dispatch=useDispatch();const{portfolioData}=useSelector(state=>state.root);const{experiences}=portfolioData;const[showAddEditModal,setShowAddEditModal]=React.useState(false);const[selectedItemForEdit,setSelectedItemForEdit]=React.useState(null);const[type,setType]=React.useState(\"add\");const onFinish=async values=>{try{dispatch(showLoading());let response;if(selectedItemForEdit){response=await axios.post(\"/api/portfolio/update-experience\",{values,_id:selectedItemForEdit._id});}else{response=await axios.post(\"/api/portfolio/add-experience\",{values,_id:portfolioData.intro._id});}dispatch(hideLoading());if(response.data.success){message.success(response.data.message);setShowAddEditModal(false);setSelectedItemForEdit(null);dispatch(hideLoading());dispatch(ReloadData(true));}else{message.error(response.data.message);}}catch(error){dispatch(hideLoading());message.error(error.message);}};const onDelete=async item=>{try{dispatch(showLoading());const response=await axios.post(\"/api/portfolio/delete-experience\",{_id:item._id});dispatch(hideLoading());if(response.data.success){message.success(response.data.message);dispatch(hideLoading());dispatch(ReloadData(true));}else{message.error(response.data.message);}}catch(error){dispatch(hideLoading());message.error(error.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary px-5 py-2 text-white\",onClick:()=>{setSelectedItemForEdit(null);setShowAddEditModal(true);},children:\"Add Experience\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-5 mt-5 sm:grid-cols-1\",children:experiences.map(experience=>/*#__PURE__*/_jsxs(\"div\",{className:\"shadow border p-5 border-gray-400 flex flex-col\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-primary text-xl font-bold\",children:experience.period}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Company : \",experience.company]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Role : \",experience.title]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Description : \",experience.description]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-5 mt-5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-5 py-2 \",onClick:()=>onDelete(experience),children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary text-white px-5 py-2 \",onClick:()=>{setSelectedItemForEdit(experience);setShowAddEditModal(true);setType(\"edit\");},children:\"Edit\"})]})]}))}),(type===\"add\"||selectedItemForEdit)&&/*#__PURE__*/_jsx(Modal,{open:showAddEditModal,title:selectedItemForEdit?\"Edit Experience\":\"Add Experience\",onCancel:()=>{setShowAddEditModal(false);setSelectedItemForEdit(null);},footer:null,children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",initialValues:selectedItemForEdit,onFinish:onFinish,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"period\",label:\"Period\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Period\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"company\",label:\"Company\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Company\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"title\",label:\"Title\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"description\",label:\"Description\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Description\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"border border-primary text-primary px-5 py-2\",onClick:()=>{setShowAddEditModal(false);setSelectedItemForEdit(null);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-primary text-white px-5 py-2 ml-auto\",children:selectedItemForEdit?\"Update\":\"Add\"})]})]})})]});}export default Experiences;","map":{"version":3,"names":["React","useSelector","useDispatch","Modal","Form","showLoading","hideLoading","ReloadData","message","axios","jsx","_jsx","jsxs","_jsxs","Experiences","dispatch","portfolioData","state","root","experiences","showAddEditModal","setShowAddEditModal","useState","selectedItemForEdit","setSelectedItemForEdit","type","setType","onFinish","values","response","post","_id","intro","data","success","error","onDelete","item","children","className","onClick","map","experience","period","company","title","description","open","onCancel","footer","layout","initialValues","Item","name","label","placeholder"],"sources":["C:/Users/Chloe Nitcheu/Documents/MERN-PORTFOLIO/client/src/pages/Admin/AdminExperiences.js"],"sourcesContent":["import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Modal, Form } from \"antd\";\r\nimport { showLoading, hideLoading, ReloadData } from \"../../redux/rootSlice\";\r\nimport { message } from \"antd\";\r\nimport axios from \"axios\";\r\n\r\nfunction Experiences() {\r\n  const dispatch = useDispatch();\r\n  const { portfolioData } = useSelector((state) => state.root);\r\n  const { experiences } = portfolioData;\r\n  const [showAddEditModal, setShowAddEditModal] = React.useState(false);\r\n  const [selectedItemForEdit, setSelectedItemForEdit] = React.useState(null);\r\n  const [type, setType] = React.useState(\"add\");\r\n\r\n  const onFinish = async (values) => {\r\n    try {\r\n      dispatch(showLoading());\r\n      let response;\r\n      if (selectedItemForEdit) {\r\n        response = await axios.post(\"/api/portfolio/update-experience\", {\r\n          values,\r\n          _id: selectedItemForEdit._id,\r\n        });\r\n      } else {\r\n        response = await axios.post(\"/api/portfolio/add-experience\", {\r\n          values,\r\n          _id: portfolioData.intro._id,\r\n        });\r\n      }\r\n      dispatch(hideLoading());\r\n      if (response.data.success) {\r\n        message.success(response.data.message);\r\n        setShowAddEditModal(false);\r\n        setSelectedItemForEdit(null);\r\n        dispatch(hideLoading());\r\n        dispatch(ReloadData(true));\r\n      } else {\r\n        message.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      dispatch(hideLoading());\r\n      message.error(error.message);\r\n    }\r\n  };\r\n\r\n  const onDelete = async (item) => {\r\n    try {\r\n      dispatch(showLoading());\r\n      const response = await axios.post(\"/api/portfolio/delete-experience\", {\r\n        _id: item._id,\r\n      });\r\n      dispatch(hideLoading());\r\n      if (response.data.success) {\r\n        message.success(response.data.message);\r\n        dispatch(hideLoading());\r\n        dispatch(ReloadData(true));\r\n      } else {\r\n        message.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      dispatch(hideLoading());\r\n      message.error(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-end\">\r\n        <button\r\n          className=\"bg-primary px-5 py-2 text-white\"\r\n          onClick={() => {\r\n\r\n            setSelectedItemForEdit(null);\r\n            setShowAddEditModal(true);\r\n          }}\r\n        >\r\n          Add Experience\r\n        </button>\r\n      </div>\r\n      <div className=\"grid grid-cols-4 gap-5 mt-5 sm:grid-cols-1\">\r\n        {experiences.map((experience) => (\r\n          <div className=\"shadow border p-5 border-gray-400 flex flex-col\">\r\n            <h1 className=\"text-primary text-xl font-bold\">\r\n              {experience.period}\r\n            </h1>\r\n            <hr />\r\n            <h1>Company : {experience.company}</h1>\r\n            <h1>Role : {experience.title}</h1>\r\n            <h1>Description : {experience.description}</h1>\r\n            <div className=\"flex justify-end gap-5 mt-5\">\r\n              <button className=\"bg-red-500 text-white px-5 py-2 \"\r\n                onClick={() => onDelete(experience)}\r\n              >\r\n                Delete\r\n              </button>\r\n              <button className=\"bg-primary text-white px-5 py-2 \"\r\n                onClick={() => {\r\n                  setSelectedItemForEdit(experience);\r\n                  setShowAddEditModal(true);\r\n                  setType(\"edit\");\r\n                }}>\r\n                Edit</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n     {\r\n      (type === \"add\" || selectedItemForEdit) && (\r\n        <Modal\r\n        open={showAddEditModal}\r\n        title={selectedItemForEdit ? \"Edit Experience\" : \"Add Experience\"}\r\n        onCancel={() => {\r\n          setShowAddEditModal(false);\r\n          setSelectedItemForEdit(null);\r\n        }}\r\n        footer={null}\r\n      >\r\n        <Form\r\n          layout=\"vertical\"\r\n          initialValues={selectedItemForEdit}\r\n          onFinish={onFinish}\r\n        >\r\n          <Form.Item name=\"period\" label=\"Period\">\r\n            <input placeholder=\"Period\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"company\" label=\"Company\">\r\n            <input placeholder=\"Company\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"title\" label=\"Title\">\r\n            <input placeholder=\"Title\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"description\" label=\"Description\">\r\n            <input placeholder=\"Description\" />\r\n          </Form.Item>\r\n\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"border border-primary text-primary px-5 py-2\"\r\n              onClick={() => {\r\n                setShowAddEditModal(false);\r\n                setSelectedItemForEdit(null);\r\n              }}\r\n            >\r\n              Cancel\r\n            </button>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"bg-primary text-white px-5 py-2 ml-auto\"\r\n            >\r\n              {selectedItemForEdit ? \"Update\" : \"Add\"}\r\n            </button>\r\n          </div>\r\n        </Form>\r\n      </Modal>\r\n      )\r\n     }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Experiences;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}